{{ define "main" }}
<div class="container mx-auto px-4 py-12">
    <div class="max-w-5xl mx-auto">
        <div class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-4xl font-bold dark:text-cream-100">{{ .Title }}</h1>
                {{ if .Content }}
                    <p class="text-gray-600 dark:text-cream-200 mt-2">{{ .Content }}</p>
                {{ end }}
            </div>
            <a
                href="javascript:window.print()"
                class="inline-flex items-center px-4 py-2 bg-mint-300 hover:bg-mint-400 text-gray-900 font-medium rounded-md transition duration-300 no-print"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                Download CV
            </a>
        </div>

        <div class="bg-white dark:bg-grape-600 rounded-lg shadow-lg overflow-hidden border border-cream-300 dark:border-grape-500">
            <!-- Tabs -->
            <div class="flex border-b border-cream-300 dark:border-grape-500 overflow-x-auto no-print">
                <button data-tab="about" class="cv-tab active px-6 py-3 font-medium whitespace-nowrap">About</button>
                <button data-tab="experience" class="cv-tab px-6 py-3 font-medium whitespace-nowrap">Experience</button>
                <button data-tab="education" class="cv-tab px-6 py-3 font-medium whitespace-nowrap">Education</button>
                <button data-tab="skills" class="cv-tab px-6 py-3 font-medium whitespace-nowrap">Skills</button>
                {{/* <button data-tab="projects" class="cv-tab px-6 py-3 font-medium whitespace-nowrap">Projects</button> */}}
            </div>

            <!-- About Tab -->
            <div id="about" class="cv-content p-8">
                <div class="flex flex-col md:flex-row">
                    <div class="md:w-1/4 mb-6 md:mb-0 flex flex-col items-center">
                        <div class="w-32 h-32 bg-cream-200 dark:bg-grape-700 rounded-full mb-4 overflow-hidden flex items-center justify-center ring-4 ring-mint-300">
                            {{ if .Site.Params.profileImage }}
                            <img src="{{ .Site.Params.profileImage | relURL }}" alt="{{ .Site.Params.author }}" class="w-full h-full object-cover">
                            {{ else }}
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-20 w-20 text-cream-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                            {{ end }}
                        </div>
                        <h2 class="text-xl font-bold dark:text-cream-100 mb-2">{{ .Site.Params.author }}</h2>
                        <p class="text-gray-600 dark:text-cream-200 text-sm mb-4">{{ .Site.Params.description }}</p>
                        <div class="flex space-x-3">
                            <a href="mailto:{{ .Site.Params.email }}" class="text-gray-600 dark:text-cream-200 hover:text-mint-300 dark:hover:text-mint-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                </svg>
                            </a>
                            <a href="tel:{{ .Site.Params.phone }}" class="text-gray-600 dark:text-cream-200 hover:text-mint-300 dark:hover:text-mint-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                </svg>
                            </a>
                            <a href="{{ .Site.Params.artstation }}" target="_blank" rel="noopener" class="text-gray-600 dark:text-cream-200 hover:text-mint-300 dark:hover:text-mint-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M0 17.723l2.027 3.505h.001a2.424 2.424 0 0 0 2.164 1.333h13.457l-2.792-4.838H0zm24-3.012l-5.597-9.683a2.427 2.427 0 0 0-2.108-1.218H7.689l12.225 21.19h.001L24 17.918a2.423 2.423 0 0 0-.001-3.207zm-14.757 3.012l-3.286-5.696L9.243 4.71 3.669 14.923l2.787 4.8h2.787z"/>
                                </svg>
                            </a>
                        </div>
                    </div>

                    <div class="md:w-3/4 md:pl-8">
                        <h3 class="text-2xl font-bold mb-4 dark:text-cream-100">Professional Summary</h3>
                        <p class="text-gray-700 dark:text-cream-200 mb-6">
                            Creative and detail-oriented 3D Artist and Game Developer with a Master's degree in Media Design. Specializing in 3D modeling, texturing, and game environment creation using Blender and Unreal Engine 5. Experienced in graphic design, motion graphics, and the complete game development pipeline from concept to implementation. Passionate about creating immersive visual experiences and bringing creative visions to life.
                        </p>

                        <h3 class="text-2xl font-bold mb-4 dark:text-cream-100">Contact Information</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700 dark:text-cream-200">
                            <div>
                                <span class="font-semibold">Email:</span> {{ .Site.Params.email }}
                            </div>
                            <div>
                                <span class="font-semibold">Phone:</span> {{ .Site.Params.phone }}
                            </div>
                            <div>
                                <span class="font-semibold">Location:</span> {{ .Site.Params.location }}
                            </div>
                            <div>
                                <span class="font-semibold">ArtStation:</span> <a href="{{ .Site.Params.artstation }}" class="text-mint-400 hover:text-mint-500">lemiric</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Experience Tab -->
            <div id="experience" class="cv-content p-8 hidden">
                <h3 class="text-2xl font-bold mb-6 dark:text-cream-100">Work Experience</h3>
                <div class="space-y-8">
                    {{ range .Site.Data.experience }}
                    <div class="border-l-4 border-mint-300 pl-4">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-start mb-2">
                            <div>
                                <h4 class="text-xl font-bold dark:text-cream-100">{{ .position }}</h4>
                                <p class="text-mint-400 font-medium">{{ .company }}</p>
                            </div>
                            <div class="text-gray-500 dark:text-cream-200 text-sm mt-1 md:mt-0">
                                {{ .startDate }} - {{ .endDate }}
                                {{ with .location }}<br>{{ . }}{{ end }}
                            </div>
                        </div>
                        <p class="text-gray-700 dark:text-cream-200 mb-3">{{ .description }}</p>
                        <div class="flex flex-wrap gap-2">
                            {{ range .technologies }}
                            <span class="px-2 py-1 bg-mint-100 dark:bg-ocean-600 text-gray-700 dark:text-cream-100 text-xs rounded">{{ . }}</span>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}
                </div>
            </div>

            <!-- Education Tab -->
            <div id="education" class="cv-content p-8 hidden">
                <h3 class="text-2xl font-bold mb-6 dark:text-cream-100">Education</h3>
                <div class="space-y-6">
                    {{ range .Site.Data.education }}
                    <div class="border-l-4 border-mint-300 pl-4">
                        <div class="flex flex-col md:flex-row md:justify-between md:items-start mb-2">
                            <div>
                                <h4 class="text-xl font-bold dark:text-cream-100">{{ .degree }}</h4>
                                <p class="text-mint-400 font-medium">{{ .institution }}</p>
                            </div>
                            <div class="text-gray-500 dark:text-cream-200 text-sm mt-1 md:mt-0">
                                {{ .startDate }} - {{ .endDate }}
                                {{ with .location }}<br>{{ . }}{{ end }}
                            </div>
                        </div>
                        {{ with .description }}
                        <p class="text-gray-700 dark:text-cream-200">{{ . }}</p>
                        {{ end }}
                        {{ with .website }}
                        <a href="{{ . }}" target="_blank" rel="noopener" class="text-mint-400 hover:text-mint-500 text-sm">{{ . }}</a>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>

                <h3 class="text-2xl font-bold mb-6 mt-10 dark:text-cream-100">Languages</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="bg-cream-200 dark:bg-grape-700 p-4 rounded-lg">
                        <h4 class="font-bold dark:text-cream-100">Croatian</h4>
                        <p class="text-gray-600 dark:text-cream-200 text-sm">Native</p>
                    </div>
                    <div class="bg-cream-200 dark:bg-grape-700 p-4 rounded-lg">
                        <h4 class="font-bold dark:text-cream-100">English</h4>
                        <p class="text-gray-600 dark:text-cream-200 text-sm">B2 - Independent User</p>
                    </div>
                </div>
            </div>

            <!-- Skills Tab -->
            <div id="skills" class="cv-content p-8 hidden">
                <h3 class="text-2xl font-bold mb-8 dark:text-cream-100">Technical Skills</h3>

                <!-- By Proficiency Section -->
                <p class="text-gray-500 dark:text-cream-200 mb-4 font-mono">By Proficiency</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                    {{ range .Site.Data.skills.proficiency }}
                    <div class="bg-cream-200 dark:bg-grape-700 p-6 rounded-lg border border-cream-300 dark:border-grape-500">
                        <h4 class="text-xl font-bold mb-2 dark:text-cream-100 flex items-center gap-2">
                            <span>{{ .icon }}</span>
                            <span>{{ .category }}</span>
                        </h4>
                        <p class="text-gray-500 dark:text-cream-200 text-sm mb-4 font-mono">{{ .description }}</p>
                        <div class="flex flex-wrap gap-3">
                            {{ range .skills }}
                            <span class="px-4 py-2 border border-mint-300 dark:border-mint-300 text-gray-700 dark:text-cream-100 rounded-lg text-sm font-medium">{{ . }}</span>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}
                </div>

                <!-- By What I Build Section -->
                <div class="bg-cream-200 dark:bg-grape-700 p-6 rounded-lg border border-cream-300 dark:border-grape-500">
                    <p class="text-gray-500 dark:text-cream-200 mb-6 font-mono">By What I Build</p>
                    <div class="space-y-6">
                        {{ range .Site.Data.skills.domains }}
                        <div class="flex flex-col md:flex-row md:items-center gap-4 pb-6 border-b border-cream-300 dark:border-grape-500 last:border-b-0 last:pb-0">
                            <h4 class="text-lg font-bold {{ .color }} w-40 shrink-0 font-mono">{{ .category }}</h4>
                            <div class="flex flex-wrap gap-3">
                                {{ range .skills }}
                                <span class="px-4 py-2 bg-mint-100 dark:bg-ocean-600 text-gray-700 dark:text-cream-100 rounded-lg text-sm font-medium border border-mint-200 dark:border-ocean-500">{{ . }}</span>
                                {{ end }}
                            </div>
                        </div>
                        {{ end }}
                    </div>
                </div>
            </div>

            {{/* Projects Tab - commented out for now
            <div id="projects" class="cv-content p-8 hidden">
                <h3 class="text-2xl font-bold mb-6 dark:text-white">Projects</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {{ range .Site.Data.projects }}
                    <div class="bg-gray-50 dark:bg-gray-700 p-6 rounded-lg">
                        <h4 class="text-lg font-bold dark:text-white mb-2">{{ .title }}</h4>
                        <p class="text-gray-700 dark:text-gray-300 text-sm mb-4">{{ .description }}</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            {{ range .technologies }}
                            <span class="px-2 py-1 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 text-xs rounded">{{ . }}</span>
                            {{ end }}
                        </div>
                        {{ with .link }}
                        <a href="{{ . }}" target="_blank" rel="noopener" class="text-blue-500 hover:text-blue-600 text-sm font-medium">View Project &rarr;</a>
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </div>
            */}}

            <div class="p-4 bg-cream-200 dark:bg-grape-800 text-right text-sm text-gray-500 dark:text-cream-200">
                Last updated: {{ now.Format "January 2006" }}
            </div>
        </div>
    </div>
</div>

<style>
.cv-tab {
    color: #6b7280;
    border-bottom: 2px solid transparent;
    transition: all 0.3s;
}
.cv-tab:hover {
    color: #374151;
}
.cv-tab.active {
    color: #1f2937;
    border-bottom-color: #7DDE92;
    background-color: #f0f7d8;
}
.dark .cv-tab {
    color: #c5f5d3;
}
.dark .cv-tab:hover {
    color: #F8FFE5;
}
.dark .cv-tab.active {
    color: #F8FFE5;
    border-bottom-color: #7DDE92;
    background-color: #5c4f99;
}

@media print {
    /* Hide non-essential elements */
    header, footer, .no-print, .cv-tab {
        display: none !important;
    }

    /* Force light theme for printing - override EVERYTHING */
    *, *::before, *::after {
        background-color: transparent !important;
        color: #1f2937 !important;
        box-shadow: none !important;
    }

    html, body {
        background: white !important;
        color: #1f2937 !important;
        width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    /* Main container white background */
    .container, .max-w-5xl, .bg-white, .bg-gray-800, .bg-gray-900 {
        background: white !important;
    }

    /* Show all CV content sections */
    .cv-content {
        display: block !important;
        background: white !important;
        color: #1f2937 !important;
        padding: 1rem !important;
        page-break-inside: avoid;
    }
    .cv-content.hidden {
        display: block !important;
    }

    /* Style headings */
    h1, h2, h3, h4 {
        color: #1f2937 !important;
    }

    /* Style links */
    a {
        color: #2563eb !important;
    }

    /* Style skill bars - these need color */
    .bg-mint-300, .bg-mint-400, [class*="bg-mint"] {
        background-color: #7DDE92 !important;
    }
    .h-2.rounded-full[style*="width"] {
        background-color: #7DDE92 !important;
    }
    .w-full.bg-gray-200, .bg-gray-200, .bg-gray-600 {
        background-color: #e5e7eb !important;
    }

    /* Border styling */
    .border-l-4, .border-mint-300 {
        border-color: #7DDE92 !important;
    }

    /* Container styling */
    .container {
        max-width: 100% !important;
        width: 100% !important;
        padding: 0 !important;
        margin: 0 !important;
    }

    /* Card backgrounds for skills/education */
    .rounded-lg, .bg-gray-50, .bg-gray-700 {
        background-color: #f9fafb !important;
        border: 1px solid #e5e7eb !important;
    }

    /* Technology tags */
    span.rounded, span.px-2 {
        background-color: #f3f4f6 !important;
        color: #374151 !important;
    }

    /* Profile image */
    img {
        filter: none !important;
    }

    /* Page margins */
    @page {
        margin: 1.5cm;
    }

    /* Section spacing */
    .cv-content + .cv-content {
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e5e7eb;
    }

    /* Remove shadow from main card */
    .shadow-lg, .shadow-md {
        box-shadow: none !important;
        border: 1px solid #e5e7eb !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('.cv-tab');
    const contents = document.querySelectorAll('.cv-content');

    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetId = this.getAttribute('data-tab');

            // Remove active class from all tabs
            tabs.forEach(t => t.classList.remove('active'));

            // Add active class to clicked tab
            this.classList.add('active');

            // Hide all content
            contents.forEach(c => c.classList.add('hidden'));

            // Show target content
            document.getElementById(targetId).classList.remove('hidden');
        });
    });
});
</script>
{{ end }}
